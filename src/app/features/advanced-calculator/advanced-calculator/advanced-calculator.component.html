<div class="container my-4">
  <h2 class="mb-3 text-white" i18n>Advanced Loan Calculator</h2>
  <p class="text-white-50 mb-4" i18n>Calculate payments with fixed and variable interest rates.</p>

  <!-- Advanced Loan Input Form -->
  <app-advanced-loan-input 
    [(amount)]="amount"
    [(totalPeriod)]="totalPeriod"
    [(fixedRate)]="fixedRate"
    [(variableRate)]="variableRate"
    [(fixedMonths)]="fixedMonths"
    (schedulesGenerated)="onSchedulesGenerated($event)"
    (inputChanged)="onInputChanged($event)"
    (scheduleSelectionChange)="onVisibilityChanged($event)"
  ></app-advanced-loan-input>

    <app-payment-summary-cards
      [annuityPayment]="annuityPayment"
      [annuityTotal]="annuityTotal"
      [linearPayment]="linearPayment"
      [linearTotal]="linearTotal"
      [amount]="amount"
      [showAnnuity]="showAnnuity"
      [showLinear]="showLinear"
    ></app-payment-summary-cards>
  
  <!-- Amortization Tables Side by Side -->
  <div class="row mt-4" *ngIf="annuitySchedule.length > 0">
    <div [ngClass]="showAnnuity && showLinear ? 'col-lg-6 mb-4' : 'col-8 mb-4'"
         *ngIf="showAnnuity">
      <h4 class="mb-3 text-white" i18n>Annuity (Equal Payments)</h4>
      <app-amortization-schedule 
        [schedule]="annuitySchedule"
        [loanAmount]="amount"
        [totalPeriod]="totalPeriod"
        [fixedRate]="fixedRate"
        [variableRate]="variableRate"
        [fixedMonths]="fixedMonths"
        [insuranceRate]="insuranceRate"
        [scheduleType]="'annuity'"
      ></app-amortization-schedule>
    </div>
    
    <div [ngClass]="showAnnuity && showLinear ? 'col-lg-6 mb-4' : 'col-8 mb-4'"
         *ngIf="showLinear">
      <h4 class="mb-3 text-white" i18n>Linear (Decreasing Payments)</h4>
      <app-amortization-schedule 
        [schedule]="linearSchedule"
        [loanAmount]="amount"
        [totalPeriod]="totalPeriod"
        [fixedRate]="fixedRate"
        [variableRate]="variableRate"
        [fixedMonths]="fixedMonths"
        [insuranceRate]="insuranceRate"
        [scheduleType]="'linear'"
      ></app-amortization-schedule>
    </div>
  </div>
</div>
